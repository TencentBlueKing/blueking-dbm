{
  "bk_biz_id": 0,
  "name": "redis主机内存使用率",
  "db_type": "redis",
  "details": {
    "app": "",
    "name": "redis主机内存使用率",
    "path": "",
    "type": "monitor",
    "items": [
      {
        "name": "redis主机内存使用率",
        "target": [
          [
            {
              "field": "host_topo_node",
              "value": [
                {
                  "bk_obj_id": "set",
                  "bk_inst_id": 2000008150
                },
                {
                  "bk_obj_id": "set",
                  "bk_inst_id": 2000008151
                },
                {
                  "bk_obj_id": "set",
                  "bk_inst_id": 2000008152
                },
                {
                  "bk_obj_id": "set",
                  "bk_inst_id": 2000008153
                },
                {
                  "bk_obj_id": "set",
                  "bk_inst_id": 2000008230
                }
              ],
              "method": "eq"
            }
          ]
        ],
        "functions": [],
        "algorithms": [
          {
            "id": 6327,
            "type": "Threshold",
            "level": 1,
            "config": [
              [
                {
                  "method": "gte",
                  "threshold": 90
                }
              ]
            ],
            "unit_prefix": ""
          },
          {
            "id": 6328,
            "type": "Threshold",
            "level": 2,
            "config": [
              [
                {
                  "method": "gte",
                  "threshold": 80
                }
              ]
            ],
            "unit_prefix": ""
          }
        ],
        "expression": "a",
        "origin_sql": "min(min_over_time(bkmonitor:dbm_system:mem:pct_used{instance_role=\"redis_master\"}[1m]))  \nby (bk_target_cloud_id,app,cluster_domain,instance_role,cluster_type,bk_target_ip)",
        "query_configs": [
          {
            "id": 6319,
            "alias": "a",
            "promql": "min(min_over_time(bkmonitor:dbm_system:mem:pct_used{instance_role=\"redis_master\"}[1m]))  \nby (bk_target_cloud_id,app,cluster_domain,instance_role,cluster_type,bk_target_ip)",
            "functions": [],
            "metric_id": "min(min_over_time(bkmonitor:dbm_system:mem:pct_used{instance_rol",
            "agg_interval": 60,
            "data_type_label": "time_series",
            "data_source_label": "prometheus"
          }
        ],
        "no_data_config": {
          "level": 2,
          "continuous": 10,
          "is_enabled": false,
          "agg_dimension": []
        }
      }
    ],
    "labels": [
      "REDIS",
      "DBM_REDIS",
      "DBM_REDIS",
      "DBM"
    ],
    "notice": {
      "config": {
        "template": [
          {
            "signal": "abnormal",
            "title_tmpl": "{{business.bk_biz_name}} - {{alarm.name}}{{alarm.display_type}}",
            "message_tmpl": "{{content.level}}\n{{content.begin_time}}\n{{content.time}}\n{{content.duration}}\n{{content.target_type}}\n{{content.data_source}}\n{{content.content}}\n{{content.current_value}}\n{{content.biz}}\n{{content.target}}\n{{content.dimension}}\n{{content.detail}}\n{{content.related_info}}\n{{action_instance.assignees}}"
          },
          {
            "signal": "recovered",
            "title_tmpl": "{{business.bk_biz_name}} - {{alarm.name}}{{alarm.display_type}}",
            "message_tmpl": "{{content.level}}\n{{content.begin_time}}\n{{content.time}}\n{{content.duration}}\n{{content.target_type}}\n{{content.data_source}}\n{{content.content}}\n{{content.current_value}}\n{{content.biz}}\n{{content.target}}\n{{content.dimension}}\n{{content.detail}}\n{{content.related_info}}"
          },
          {
            "signal": "closed",
            "title_tmpl": "{{business.bk_biz_name}} - {{alarm.name}}{{alarm.display_type}}",
            "message_tmpl": "{{content.level}}\n{{content.begin_time}}\n{{content.time}}\n{{content.duration}}\n{{content.target_type}}\n{{content.data_source}}\n{{content.content}}\n{{content.current_value}}\n{{content.biz}}\n{{content.target}}\n{{content.dimension}}\n{{content.detail}}\n{{content.related_info}}"
          }
        ],
        "need_poll": true,
        "notify_interval": 1800,
        "interval_notify_mode": "standard"
      },
      "signal": [
        "no_data",
        "abnormal"
      ],
      "options": {
        "end_time": "23:59:59",
        "start_time": "00:00:00",
        "assign_mode": [],
        "upgrade_config": {},
        "converge_config": {
          "count": 1,
          "condition": [
            {
              "value": [
                "self"
              ],
              "dimension": "strategy_id"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "dimensions"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "alert_level"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "signal"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "bk_biz_id"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "notice_receiver"
            },
            {
              "value": [
                "self"
              ],
              "dimension": "notice_way"
            }
          ],
          "timedelta": 60,
          "is_enabled": true,
          "converge_func": "collect",
          "need_biz_converge": true,
          "sub_converge_config": {
            "count": 2,
            "condition": [
              {
                "value": [
                  "self"
                ],
                "dimension": "bk_biz_id"
              },
              {
                "value": [
                  "self"
                ],
                "dimension": "notice_receiver"
              },
              {
                "value": [
                  "self"
                ],
                "dimension": "notice_way"
              },
              {
                "value": [
                  "self"
                ],
                "dimension": "alert_level"
              },
              {
                "value": [
                  "self"
                ],
                "dimension": "signal"
              }
            ],
            "timedelta": 60,
            "converge_func": "collect_alarm"
          }
        },
        "exclude_notice_ways": {
          "closed": [],
          "recovered": []
        },
        "noise_reduce_config": {
          "unit": "percent",
          "count": 10,
          "timedelta": 5,
          "dimensions": [],
          "is_enabled": false
        }
      },
      "config_id": 8833,
      "relate_type": "NOTICE",
      "user_groups": [
        0
      ]
    },
    "source": "bkmonitorv3",
    "actions": [],
    "detects": [
      {
        "level": 1,
        "connector": "and",
        "expression": "",
        "trigger_config": {
          "count": 2,
          "uptime": {
            "calendars": [],
            "time_ranges": [
              {
                "end": "23:59",
                "start": "00:00"
              }
            ]
          },
          "check_window": 5
        },
        "recovery_config": {
          "check_window": 5,
          "status_setter": "recovery"
        }
      },
      {
        "level": 2,
        "connector": "and",
        "expression": "",
        "trigger_config": {
          "count": 2,
          "uptime": {
            "calendars": [],
            "time_ranges": [
              {
                "end": "23:59",
                "start": "00:00"
              }
            ]
          },
          "check_window": 5
        },
        "recovery_config": {
          "check_window": 5,
          "status_setter": "recovery"
        }
      }
    ],
    "scenario": "os",
    "bk_biz_id": 2005000194,
    "data_source_type": "Prometheus"
  },
  "is_enabled": true
}
