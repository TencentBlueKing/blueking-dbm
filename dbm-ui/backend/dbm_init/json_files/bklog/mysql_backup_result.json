{
    "bk_biz_id": {{bk_biz_id}},
    "collector_config_name": "mysql_backup_result",
    "collector_config_name_en": "mysql_backup_result",
    "collector_scenario_id": "row",
    "category_id": "host_process",
    "etl_config": "bk_log_json",
    "params": {
        "paths": ["/home/mysql/dbareport/mysql/dbbackup/result/*.log"],
        "conditions": {
            "separator": "",
            "separator_filters": [],
            "type": "match",
            "match_type": "include",
            "match_content": ""
        },
        "tail_files": true,
        "ignore_older": 2678400,
        "max_bytes": 204800
    },
    {
        "etl_params": {
            "es_unique_field_list": [
                "cloudId",
                "serverIp",
                "path",
                "gseIndex",
                "iterationIndex",
                "bk_host_id"
            ],
            "separator_node_source": "data",
            "separator_node_action": "json",
            "separator_node_name": "bk_separator_object",
            "retain_original_text": true,
            "separator_fields_remove": "",
            "etl_flat": false
        }
    },
    {
        "fields": [
            {
                "field_name": "bk_host_id",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "主机ID",
                "unit": "",
                "alias_name": "",
                "option": {
                    "es_type": "integer"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "cloudid",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "云区域ID",
                "unit": "",
                "alias_name": "cloudId",
                "option": {
                    "es_type": "integer"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "utctime",
                "type": "timestamp",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "数据时间",
                "unit": "",
                "alias_name": "dtEventTimeStamp",
                "option": {
                    "es_type": "date",
                    "es_format": "epoch_millis",
                    "time_format": "yyyy-MM-dd HH:mm:ss",
                    "time_zone": 0
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": true,
                "is_dimension": true,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false
            },
            {
                "field_name": "gseindex",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "gse索引",
                "unit": "",
                "alias_name": "gseIndex",
                "option": {
                    "es_type": "long"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "long",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "iterationindex",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "迭代ID",
                "unit": "",
                "alias_name": "iterationIndex",
                "option": {
                    "es_type": "integer"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "data",
                "type": "string",
                "tag": "metric",
                "default_value": null,
                "is_config_by_user": true,
                "description": "original_text",
                "unit": "",
                "alias_name": "log",
                "option": {
                    "es_type": "text",
                    "es_norms": false
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": true,
                "is_dimension": false,
                "is_delete": false
            },
            {
                "field_name": "filename",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "日志路径",
                "unit": "",
                "alias_name": "path",
                "option": {
                    "es_type": "keyword"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "ip",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "ip",
                "unit": "",
                "alias_name": "serverIp",
                "option": {
                    "es_type": "keyword"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "time",
                "type": "timestamp",
                "tag": "timestamp",
                "default_value": "",
                "is_config_by_user": true,
                "description": "数据上报时间",
                "unit": "",
                "alias_name": "",
                "option": {
                    "es_type": "date",
                    "es_format": "epoch_millis",
                    "time_format": "yyyy-MM-dd HH:mm:ss",
                    "time_zone": 0
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "ext",
                "type": "object",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "额外信息字段",
                "unit": "",
                "alias_name": "__ext",
                "option": {
                    "es_type": "object"
                },
                "is_disabled": false,
                "is_built_in": true,
                "is_time": false,
                "field_type": "object",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "backup_begin_time",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 1,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.backup_begin_time"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "backup_end_time",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 2,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.backup_end_time"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "backup_id",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 3,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.backup_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "backup_type",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 4,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.backup_type"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "bill_id",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 5,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.bill_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "binlog_info",
                "type": "object",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 6,
                    "es_type": "object",
                    "real_path": "bk_separator_object.binlog_info"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "object",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "bk_app_id",
                "field_name": "bk_biz_id",
                "value": {{bk_biz_id}},
                "option": {
                    "field_index": 7,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.bk_biz_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "bk_cloud_id",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "bkcloud_id",
                "option": {
                    "field_index": 8,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.bk_cloud_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "cluster_address",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 9,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.cluster_address"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "cluster_id",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 10,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.cluster_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "consistent_backup_time",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 11,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.consistent_backup_time"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "data_schema_grant",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 12,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.data_schema_grant"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "file_name",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 13,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.file_name"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "file_size",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 14,
                    "es_type": "long",
                    "real_path": "bk_separator_object.file_size"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "long",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "file_type",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 15,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.file_type"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "master_host",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 16,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.master_host"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "master_port",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 17,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.master_port"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "mysql_host",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 18,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.mysql_host"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "mysql_port",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 19,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.mysql_port"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "mysql_role",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 20,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.mysql_role"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "shard_value",
                "type": "float",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 21,
                    "es_type": "integer",
                    "real_path": "bk_separator_object.shard_value"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "int",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "task_id",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 22,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.task_id"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            },
            {
                "field_name": "time_zone",
                "type": "string",
                "tag": "dimension",
                "default_value": null,
                "is_config_by_user": true,
                "description": "",
                "unit": "",
                "alias_name": "",
                "option": {
                    "field_index": 23,
                    "es_type": "keyword",
                    "real_path": "bk_separator_object.time_zone"
                },
                "is_disabled": false,
                "is_built_in": false,
                "is_time": false,
                "field_type": "string",
                "is_analyzed": false,
                "is_delete": false,
                "is_dimension": true
            }
        ]
    },
    "data_encoding": "UTF-8",
    "retention": 7,
    "es_shards": 1,
    "target_object_type": "HOST",
    "target_node_type": "TOPO",
    "target_nodes": [
        {% for node in target_nodes %}{{ node }}{% if not loop.last %}, {% endif %}
        {% endfor %}
    ]
}